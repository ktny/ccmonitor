[tools]
node = "20"

# Development environment management tasks
[tasks.setup]
description = "Initialize TypeScript development environment"
run = """
    echo "ðŸš€ Setting up ccstat TypeScript development environment..."
    echo "ðŸ“‹ Checking Node.js installation..."
    node --version
    npm --version
    echo "ðŸ“¦ Installing npm dependencies..."
    npm ci
    echo "ðŸ”§ Creating necessary directories..."
    mkdir -p dist bin
    echo "âœ… Development environment setup complete!"
    echo ""
    echo "Next steps:"
    echo "  - Run 'npm run dev' for development mode"
    echo "  - Run 'npm run build' to build the project"
    echo "  - Run 'npm run test' to run tests"
    echo "  - Run 'npm run check' for quality checks"
"""

[tasks.deps]
description = "Install npm dependencies"
run = """
    echo "ðŸ“¦ Installing npm dependencies..."
    npm ci
    echo "âœ… Dependencies installation complete"
"""

[tasks.lint]
description = "Run TypeScript linting"
run = "npm run lint"
sources = ["src/**/*.ts", "src/**/*.tsx", "package.json", "tsconfig.json"]

[tasks.format]
description = "Format TypeScript code"
run = """
    echo "ðŸŽ¨ Formatting TypeScript code..."
    npm run format
    echo "âœ… Code formatting complete"
"""
sources = ["src/**/*.ts", "src/**/*.tsx"]

[tasks.dev]
description = "Development mode with file watching"
run = """
    echo "ðŸ”„ Starting TypeScript development mode..."
    echo "Watching for changes in TypeScript files..."
    echo "Press Ctrl+C to stop"
    echo ""
    mise watch --glob "src/**/*.ts" --glob "src/**/*.tsx" --glob "package.json" --glob "tsconfig.json" -- npm run dev
"""
sources = ["src/**/*.ts", "src/**/*.tsx", "package.json", "tsconfig.json"]

[tasks.build]
description = "Build the TypeScript project"
run = """
    echo "ðŸ”¨ Building TypeScript project..."
    npm run build
    echo "âœ… Build complete"
"""
sources = ["src/**/*.ts", "src/**/*.tsx", "package.json", "tsconfig.json"]

[tasks.test]
description = "Run tests"
run = """
    echo "ðŸ§ª Running tests..."
    npm run test
    echo "âœ… Tests complete"
"""
sources = ["src/**/*.ts", "src/**/*.tsx", "src/**/*.test.ts"]

[tasks.check]
description = "Run all quality checks"
run = """
    echo "âœ… Running all quality checks..."
    npm run check
    echo "âœ… Quality checks complete"
"""
sources = ["src/**/*.ts", "src/**/*.tsx", "package.json", "tsconfig.json"]
